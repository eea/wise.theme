!function(a,b,c){function d(){if(c(".button-field").addClass("btn"),c(".wise-search-form-container #s2id_form-widgets-marine_unit_id").parentsUntil(".field").parent().hide(),c("#form-buttons-continue").hide("fast"),c("#form-buttons-download").length>0){var a=c("#form-buttons-download").prop("outerHTML").replace("input","button")+' <span style="margin-left:0.4rem;">Download as XLS</span>',b=c("#form-buttons-download").parent();c("#form-buttons-download").remove(),b.append(c(a)),c("#form-buttons-download").val("&#xf019; Download as XLS"),c("#form-buttons-download").addClass("fa").addClass("fa-download")}}function e(){var a='<span class="controls" style="display: inline-block;background-color: #ddd;padding-top: 2px;padding-bottom: 2px;padding-left: 0;position: relative;  "><span style="font-size: 0.8em; margin-left: 5px;">Select :</span><a class="" data-value="all"><label><span class="label">All</span></label></a>',b='<a class="" data-value="none" ><label><span class="label">Clear all</span></label></a>',c='<a class="" data-value="invert"><label><span class="label">Invert selection</span></label></a><div class="btn btn-default apply-filters" data-value="apply"><span class="" >Apply filters</span></div><span class="ui-autocomplete"><span class=" search-icon" ></span><span style="position: relative;padding-top:1px;padding-bottom:1px;background: white;" class="search-span"><input class="ui-autocomplete-input" type="text" style="width: 80%;" /><span class="clear-btn"><a class="fa fa-times"></a></span></span></span>';return a+b+c}function f(a,b){var d=b.find(".option .label:not(.horizontal) "),e=d.parentsUntil(".option").parent(),f=e.find("input"),g=e.parent(),h=g.find(".noresults");if(""===c(a.target).val()){h.addClass("hidden"),e.removeClass("hidden");var i=b.find(".panel").data("checked_items");return i&&c.each(f,function(a,b){b.checked=i.indexOf(b.id)!==-1}),!0}e.removeClass("hidden");var j=c(a.target).val().toLowerCase().replace(/\s/g,"_"),k=(new RegExp("^"+c.ui.autocomplete.escapeRegex(j),"i"),new RegExp(c.ui.autocomplete.escapeRegex(j),"i")),l={},m=(b.find(".option .label:not(.horizontal) ").map(function(a,b){return l[c(b).text().toLowerCase()]=c(b).text().toLowerCase().replace(/\s/g,"_"),c(b).text().toLowerCase().replace(/\s/g,"_")}),[]);c.each(l,function(a,b){k.test(b)||m.push(a)});var n=d.filter(function(a,b){return m.indexOf(c(b).text().toLowerCase())!==-1}),o=d.filter(function(a,b){return m.indexOf(c(b).text().toLowerCase())===-1});c.each(o,function(a,b){c(b).parentsUntil(".option").parent().find("[type='checkbox']").prop("checked",!0)}),c.each(n,function(a,b){c(b).parentsUntil(".option").parent().find("[type='checkbox']").prop("checked",!1),c(b).parentsUntil(".option").parent().find("input[type='checkbox']").prop("checked",!1),c(b).parentsUntil(".option").parent().find("input[type='checkbox']").removeAttr("checked"),c(b).parentsUntil(".option").parent().addClass("hidden")}),n.length===d.length?h.removeClass("hidden"):h.addClass("hidden")}function g(a){a.find(".ui-autocomplete-input").autocomplete({minLength:0,source:[],search:function(b){return f(b,a)},create:function(){var a=this,b=c(this).parentsUntil(".ui-autocomplete").find(".clear-btn ");b.on("click",null,a,function(a){c(this).parentsUntil(".controls").find("input").val(""),c(this).parentsUntil(".controls").find("input").trigger("change"),c(a.data).autocomplete("search","undefined")})}})}function h(b,d,e){b.addClass("panel-group");var f=b.find("> span:not(.controls)");f.css("border-radius",0),f.addClass(d+"-collapse").addClass("collapse").addClass("panel").addClass("panel-default");var h=b.find(".horizontal"),i="<a data-toggle='collapse' class='accordion-toggle' >"+h.text()+"</a>";if(h.html(i),h.addClass("panel-heading").addClass("panel-title"),h.attr("data-toggle","collapse"),h.attr("data-target","."+d+"-collapse"),f.collapse({toggle:!0}),f.collapse({toggle:!0}),b.find(".accordion-toggle").addClass("accordion-after"),f.on("hidden.bs.collapse",function(){f.fadeOut("fast"),b.find(".controls").slideUp("fast"),b.css({"border-bottom":"1px solid #ccc;"})}),f.on("show.bs.collapse",function(){f.fadeIn("fast"),b.find(".controls").slideDown("fast"),b.find("> span").css({display:"block"}),b.find(".accordion-toggle").addClass("accordion-after")}),f.on("hide.bs.collapse",function(){a.setTimeout(function(){b.find(".accordion-toggle").removeClass("accordion-after")},600)}),e.length<6)b.find(".controls .ui-autocomplete").hide();else{f.append("<span class='noresults hidden'>No results found</span>"),f.data("checked_items",[]);var j=f.data("checked_items");c.each(b.find("input:checked"),function(a,b){j.push(b.id)}),g(b)}}function i(b){var d=b.length;b.each(function(b,f){var g=c(f),i=g.find(".option"),j=i.find("input[type='checkbox']").length>0;if(j){var k=g.attr("id");c("#"+k).on("click",".option",function(){var b=this;c("#ajax-spinner2").hide(),a.WISE.blocks.indexOf(c(this).parentsUntil(".field").parent().attr("id"))!==-1||a.setTimeout(function(){c(".wise-search-form-container .formControls #form-buttons-continue").trigger("click",{button:b})},300)});var l=e();g.find("> label.horizontal").after(l),i.each(function(a){var b=c(i[a]).text();c(i[a]).attr("title",b.trim())}),i.length<4?(g.find(".controls a").hide(),g.find(".controls").html("").css("height","1px").css("padding",0)):(h(g,k,i),g.find(".search-icon").on("click",function(a){c(a.target).parent().find("input").trigger("focus")}))}--d||c(".wise-search-form-container, #wise-search-form").animate({opacity:1},1e3)})}function j(b){b.preventDefault();var d=c(this).parent().parent();a.WISE.blocks.push(c(this).parentsUntil(".field").parent().attr("id")),d.find(".apply-filters").show();var e=n(c(d).find("[type='checkbox']"));c.each(e,function(a){"all"!==c(e[a]).val()&&"none"!==c(e[a]).val()&&c(e[a]).prop("checked",!0)})}function k(b){b.preventDefault(),c(this).prop("checked",!1);var d=c(this).parent().parent();d.find(".apply-filters").show();var e=n(c(d).find("[type='checkbox']"));a.WISE.blocks.push(c(this).parentsUntil(".field").parent().attr("id")),c.each(e,function(a){c(e[a]).prop("checked",!1)})}function l(b){b.preventDefault(),c(this).prop("checked",!1);var d=c(this).parent().parent();d.find(".apply-filters").show(),a.WISE.blocks.push(c(this).parentsUntil(".field").parent().attr("id"));var e=n(c(d).find("[type='checkbox']")),f=e.filter(function(a,b){return c(b).is(":checked")}),g=e.filter(function(a,b){return!c(b).is(":checked")});c.each(f,function(a){c(f[a]).prop("checked",!1)}),c.each(g,function(a){c(g[a]).prop("checked",!0)})}function m(){var a=c(".controls");a.on("click","a[data-value='all']",j),a.on("click","a[data-value='none']",k),a.on("click","a[data-value='invert']",l),a.one("click",".apply-filters",function(){c(".wise-search-form-container [name='form.widgets.page']").val(0),c(".wise-search-form-container .formControls #form-buttons-continue").trigger("click",{button:this})})}function n(a){return a.filter(function(a,b){return B.indexOf(c(b).val())===-1})}function o(){var b=c(".wise-search-form-container, #wise-search-form").find("[data-fieldname]");b.on("click",".option",function(b){c("#ajax-spinner2").hide();var d=c(this).find("input[type='checkbox']").val();a.WISE.blocks.indexOf(c(this).parentsUntil(".field").parent().attr("id"))!==-1||(c(".wise-search-form-container [name='form.widgets.page']").val(0),B.indexOf(d)===-1&&c(b.target).find("input[type='checkbox']").trigger("click"))})}function p(){c(".wise-search-form-container select").each(function(b,d){c(d).addClass("js-example-basic-single");var e=c(d).find("option").length<10,f={placeholder:"Select an option",closeOnSelect:!0,dropdownAutoWidth:!0,width:"100%",theme:"flat"};e&&(f.minimumResultsForSearch=1/0),c(d).select2(f),c(".wise-search-form-container #s2id_form-widgets-marine_unit_id").hide(),c(d).on("select2-selecting",function(b){"form-widgets-article"===c(this).attr("id")&&c(b.target).closest(".form-right-side").next().remove();var d=c(".wise-search-form-container");d.find("[name='form.buttons.prev']").remove(),d.find("[name='form.buttons.next']").remove(),d.find("[name='form.widgets.page']").remove();var e=this;a.setTimeout(function(){c(".wise-search-form-container .formControls #form-buttons-continue").trigger("click",{select:e})},300)})})}function q(){c("#wise-search-form select:not(.notselect)").addClass("js-example-basic-single").each(function(a,b){var d={placeholder:"Select an option",closeOnSelect:!0,dropdownAutoWidth:!1,width:"auto",theme:"flat",minimumResultsForSearch:20,allowClear:!0,dropdownParent:"#marine-unit-trigger",dropdownAdapter:"AttachContainer",containerCssClass:"select2-top-override",dropdownCssClass:"select2-top-override-dropdown",debug:!0};if(c(b).select2(d),c(b).parentsUntil(".field").parent().prepend("<h4>Marine Unit ID: </h4>"),c(b).on("select2-open",function(){var a=c("#marine-unit-trigger").offset().top;c("#marine-unit-trigger .arrow").hide(),c(".select2-top-override-dropdown").css({top:a+c("#marine-unit-trigger").height()-c("#marine-unit-trigger .arrow").height()+"px","margin-top":"12px !important"})}),c(b).on("select2-selecting",function(a){c("#wise-search-form #marine-unit-trigger a").text(a.object.text),c(".wise-search-form-container [name='form.widgets.page']").val(0),c(".wise-search-form-container #form-widgets-marine_unit_id").select2().val(a.val).trigger("change"),c(".wise-search-form-container .formControls #form-buttons-continue").trigger("click",{select:a.target})}),c(b).on("select2-close",function(){c("#marine-unit-trigger").css("background","transparent"),c("#marine-unit-trigger a").css("background","transparent"),c("#marine-unit-trigger .arrow").show()}),c("#wise-search-form select").hasClass("js-example-basic-single")){var e=c('#wise-search-form  select [value="'+jQuery("#wise-search-form .select-article select").val()+'"]').text();c("#wise-search-form select:not(.notselect)").parentsUntil(".field").before('<div id="marine-unit-trigger"><div class="text-trigger">'+e+'<span class="fa fa-caret-down text-trigger-icon"></span></div></div>'),c("#marine-unit-trigger").on("click",function(){if(C)return!1;c("#marine-unit-trigger").css("background","rgb(238, 238, 238)"),c("#marine-unit-trigger a").css("background","rgb(238, 238, 238)"),c("#wise-search-form select:not(.notselect)").select2("open");var a=c("#marine-unit-trigger a").height();c(".select2-top-override-dropdown").css("margin-top",a/2+"px")})}})}function r(){function d(a){var b=c(a.element[0]);return'<span style="font-size: 1.5rem; font-weight: bold;color: #337ab7">'+b.attr("data-maintitle")+'</span> <span style="color: #337ab7;font-size: 1.3rem;">('+b.attr("data-subtitle")+")</span>"}p(),q();var e="auto",f=!0;a.matchMedia("(max-width: 967px)").matches&&(e=!1,f=!1);var g={placeholder:"Select an option",closeOnSelect:!0,dropdownAutoWidth:f,width:e,theme:"flat",minimumResultsForSearch:20,containerCssClass:"extra-details-select"};if(c.each(c("#wise-search-form .extra-details-select"),function(a,b){c(b).find("option").length>1?c(b).select2(g):c(b).hide()}),a.matchMedia("(max-width: 967px)").matches){var h={placeholder:"Select an option",closeOnSelect:!0,dropdownAutoWidth:f,width:e,theme:"flat",minimumResultsForSearch:20,formatSelection:d,formatResult:d};void 0!==c.fn.select2&&(c("#mobile-select-article").select2(h),c("#mobile-select-article").one("select2-selecting",function(a){b.location.href=a.choice.id}))}c("#wise-search-form .extra-details .tab-panel").fadeOut("slow",function(){c.each(c("#wise-search-form .extra-details .extra-details-section"),function(a,b){c(c(b).find(".tab-panel")[0]).show()})}),c("#wise-search-form .extra-details-select").on("select2-selecting",function(a){var b=c(a.target).parentsUntil(".extra-details-section").parent();c.each(c(b).find(".tab-panel"),function(b,d){c(d).attr("id")!==a.choice.id?c(d).hide():c(d).fadeIn()})})}function s(){var a=c("ul.nav:not(.topnav) > li"),b=a.length;if(b>1){var d=2===b?35:Math.floor((100-b)/b);a.css("width",d+"%");var e=c("ul.nav").width(),f=Math.floor(e/100);c(a).css({"margin-left":0,"margin-right":f/2+"px"})}else c(a).css({"margin-left":0});if(c.each(c(".tabs-wrapper"),function(a,b){if(0===c(b).find("ul").length)return!0}),1===c("#tabs-wrapper ul li").length){c("#tabContents").removeClass("tab-content"),c("#tabs-wrapper ul").attr("class",""),c("#tabs-wrapper ul li").css({"background-color":"transparent","float":"none"});var g=c("#tabs-wrapper ul li a").text();c("#tabs-wrapper ul li").append("<h4>"+g+"</h4>"),c("#tabs-wrapper ul li a").remove(),c("#tabs-wrapper .tab-pane").removeClass("fade")}var h=c("#wise-search-form ul.topnav li").length,i=100/h-1;c("#wise-search-form .topnav li").css({width:i+"%","margin-right":"1%"})}function t(){c("#tabs-wrapper ul li:first-child a").trigger("click"),c(".tabs-wrapper ul li:first-child a").trigger("click")}function u(a){var b=a.data.direction,d=c(".wise-search-form-container #s2id_form-widgets-marine_unit_id"),e=d.select2("data"),f=c(e.element[0]).next(),g=c(e.element[0]).prev();if("next"===b)var h=f.val();else if("prev"===b)var h=g.val();c(".wise-search-form-container [name='form.widgets.page']").remove(),c(".wise-search-form-container #form-widgets-marine_unit_id").select2().val(h).trigger("change"),c(".wise-search-form-container #s2id_form-widgets-marine_unit_id").hide(),c(".wise-search-form-container .formControls #form-buttons-continue").trigger("click")}function v(){var a=c(".center-section [name='form.buttons.prev']"),b=c(".center-section [name='form.buttons.next']");a.one("click",function(){return!C&&(c(".wise-search-form-container").find("form").append("<input type='hidden' name='form.buttons.prev' value='Prev'>"),void c(".wise-search-form-container").find(".formControls #form-buttons-continue").trigger("click"))}),b.one("click",function(){return!C&&(c(".wise-search-form-container").find("form").append("<input type='hidden' name='form.buttons.next' value='Next'>"),void c(".wise-search-form-container").find(".formControls #form-buttons-continue").trigger("click"))});var d=(c("#wise-search-form select:not(.notselect)").val(),c("#wise-search-form select:not(.notselect) option"));if(c("#marine-unit-nav").hide(),c("#wise-search-form select:not(.notselect)").val()!==c(d[1]).val()){var e='<button type="submit" id="form-buttons-prev-top" name="marine.buttons.prev" class="submit-widget button-field btn btn-default pagination-prev fa fa-angle-left" value="" button="">          </button>';c("#form-buttons-prev-top").append(e),c("#form-buttons-prev-top").on("click",null,{direction:"prev"},u),c("#form-buttons-prev-top").hide(),c("#marine-unit-trigger .arrow-left-container").one("click",function(){c("#form-buttons-prev-top").trigger("click")})}else c("#marine-unit-trigger .arrow-left-container").hide(),c(".text-trigger").css("margin-left",0);if(c("#wise-search-form select:not(.notselect)").val()!==c(d[d.length-1]).val()){var f='<button type="submit" id="form-buttons-next-top" name="marine.buttons.next" class="submit-widget button-field btn btn-default fa fa-angle-right" value="">            </button>';c("#form-buttons-next-top").append(f),c("#form-buttons-next-top").on("click",null,{direction:"next"},u),c("#form-buttons-next-top").hide(),c("#marine-unit-trigger .arrow-right-container").one("click",function(){c("#form-buttons-next-top").trigger("click")})}else c("#marine-unit-trigger .arrow-right-container").hide()}function w(){var a=c(".prev-next-row").eq(0);a.length&&c("#marine-widget-top").detach().insertBefore(a),d(),i(c(".wise-search-form-container, #wise-search-form").find("[data-fieldname]")),m(c(".wise-search-form-container")),o(),r(),s(),t(),v()}function x(b,d){a.WISE.blocks=[],c("#wise-search-form .no-results").remove();var e="<div id='wise-search-form-container-preloader' ></div>",f=c("#ajax-spinner2").clone().attr("id","ajax-spinner-form").css({position:"absolute",top:"50%",left:"50%",transform:"translate3d(-50%, -50%,0)"}).show();if(c(".wise-search-form-container").append(e),c("#wise-search-form-container-preloader").append(f),c("#form-widgets-marine_unit_id").prop("disabled",!0),c("[name='form.buttons.prev']").prop("disabled",!0),c("[name='form.buttons.next']").prop("disabled",!0),c("[name='marine.buttons.prev']").prop("disabled",!0),c("[name='marine.buttons.next']").prop("disabled",!0),c("#marine-widget-top").length>0){var g=c("#marine-widget-top").next();g.css("position","relative")}else g=c(".left-side-form");g.prepend("<div id='wise-search-form-preloader' ></div>"),c("#wise-search-form-preloader").append("<span style='position: absolute;    display: block;    left: 50%; top: 10%;'></span>"),c("#wise-search-form-preloader > span").append(c("#ajax-spinner2").clone().attr("id","ajax-spinner-center").show()),c("#ajax-spinner-center").css({position:"fixed"}),C=!0}function y(b,d,e){c("#wise-search-form #wise-search-form-top").siblings().html(""),c("#wise-search-form #wise-search-form-top").siblings().fadeOut("fast"),c("#wise-search-form .topnav").next().remove();var f=c(b);a.WISE.formData=c(b).find(".wise-search-form-container").clone(!0);var g=f.find(".wise-search-form-container"),h=g.html(),i=f.find("#wise-search-form #wise-search-form-top").siblings();c(".wise-search-form-container").html(h),f.find("#wise-search-form .topnav").next().length>0&&c("#wise-search-form .topnav").after(f.find("#wise-search-form .topnav").next()),c("#wise-search-form #wise-search-form-top").siblings().remove(),c("#wise-search-form #wise-search-form-top").after(i),w(),c("[name='form.buttons.prev']").prop("disabled",!1),c("[name='form.buttons.next']").prop("disabled",!1),c("[name='marine.buttons.prev']").prop("disabled",!1),c("[name='marine.buttons.next']").prop("disabled",!1)}function z(a,b){"success"===b&&c(".wise-search-form-container").fadeIn("fast",function(){c("#wise-search-form #wise-search-form-top").siblings().fadeIn("fast")}),c(".wise-search-form-container").find("[name='form.buttons.prev']").remove(),c(".wise-search-form-container").find("[name='form.buttons.next']").remove(),c("#wise-search-form #loader-placeholder").remove(),c("#form-widgets-marine_unit_id").prop("disabled",!1),c("#wise-search-form select").hasClass("js-example-basic-single")&&(c("#wise-search-form .select2-choice").width()/2<=c("#wise-search-form #select2-chosen-3").width()?c("#wise-search-form .select2-choice").css("width","50%"):2*(c("#wise-search-form .select2-choice").width()/3)<=c("#wise-search-form #select2-chosen-3").width()&&c("#wise-search-form .select2-choice").css("width","70%")),0===c("#wise-search-form-top").next().length&&c("#wise-search-form #wise-search-form-top").after("<span class='no-results'>No results found.</span>"),C=!1}function A(b,d,e){if(a.WISE.formData.length>0){var f=c(c(a.WISE.formData)[0]).find(".field");c.each(f,function(a,b){var d=c(b).find(".option input[type='checkbox']:checked");d.length>0})}c("#wise-search-form-top").find(".alert").remove(),c("#wise-search-form-top").append('<div class="alert alert-danger alert-dismissible show" style="margin-top: 2rem;" role="alert">  <strong>There was a error from the server.</strong> You should check in on some of those fields from the form.  <button type="button" class="close" data-dismiss="alert" aria-label="Close">    <span aria-hidden="true">&times;</span>  </button></div>'),c(".wise-search-form-container").find("[name='form.buttons.prev']").remove(),c(".wise-search-form-container").find("[name='form.buttons.next']").remove(),c("#form-widgets-marine_unit_id").prop("disabled",!1),c("#wise-search-form-container-preloader").remove(),c("#wise-search-form-preloader").remove(),c("#ajax-spinner-form").hide(),c("[name='form.buttons.prev']").prop("disabled",!0),c("[name='form.buttons.next']").prop("disabled",!0),c("[name='marine.buttons.prev']").prop("disabled",!0),c("[name='marine.buttons.next']").prop("disabled",!0),C=!1}var B=["all","none","invert","apply"];c.randomString=function(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",b=8,c="",d=0;d<b;d++){var e=Math.floor(Math.random()*a.length);c+=a.substring(e,e+1)}return c},c.getMultipartData=function(a){var b=c.randomString(),d="--"+b,e="",f="\r\n",g=(c(a).attr("id"),c(a).serializeArray());return 0!==g.length&&(c.each(g,function(a,b){e+=d+f+'Content-Disposition: form-data; name="'+b.name+'"'+f+f+b.value+f}),e+=d+"--"+f,[b,e])};var C=!1;c("body").append(c("#ajax-spinner").clone(!0).attr("id","ajax-spinner2")),c("#ajax-spinner").remove(),jQuery(b).ready(function(b){w();var c=!0;a.WISE={},a.WISE.formData=b(".wise-search-form-container").clone(!0),a.WISE.blocks=[],b(".wise-search-form-container").unbind("click").on("click",".formControls #form-buttons-continue",function(a){if(!c)return!0;a.preventDefault();var d,e=b(".wise-search-form-container").find("form"),f=e.attr("action"),g=arguments[1],h=g&&g.button;g&&!h||(d=function(a){var c,d,e;c=b(a).closest(".panel-group"),d=c.closest(".subform"),e=d.find(".subform"),c.nextAll(".panel-group").find(".panel").empty(),e.length&&e.find(".panel").empty()},h?d(h):b(".ui-autocomplete-input").each(function(a,b){if(b.value)return d(b),!1}));var i=b.getMultipartData("#"+e.attr("id"));b.ajax({type:"POST",contentType:"multipart/form-data; boundary="+i[0],cache:!1,data:i[1],dataType:"html",url:f,beforeSend:x,success:y,complete:z,error:A})})})}(window,document,jQuery);
//# sourceMappingURL=msfd_search.js.map