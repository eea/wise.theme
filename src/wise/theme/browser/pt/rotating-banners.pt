<tal:def tal:define="banners view/banners">
  <tal:cond tal:condition="banners">

    <div class="rotating-banners-container">
      <!-- <script src="++theme++wise-theme/static/js/jquery-cycle.js"></script> -->

      <!-- <script>
        // <![CDATA[
        jQuery(document).ready(function() {
        $('.rotating-banners').cycle({
        fx: 'fade',
        pauseOnHover: true,
        timeout: 4000,
        speed: 500,
        swipe: true,
        prev: '#b-prev',
        next: '#b-next'
        });
        });
        // ]]>
      </script> -->
      <div id="slideshow" class="rotating-banners"
           data-cycle-slides=".slideContainer">
        <tal:rep repeat="banner banners">
          <div class="slideContainer" tal:define="obj banner/getObject">
            <div class="banner-wrapper">
              <div class="banner-content">
                <div>
                  <h4 class="title" tal:content="banner/Title">Title</h4>
                  <div class="banner-text" tal:content="structure python: obj.text.output">
                    Description
                  </div>
                  <div class="banner-source" tal:content="structure python: obj.embed_source.output" tal:on-error="nothing">Source</div>
                </div>
              </div>

              <div class="banner-graph-area" tal:define="image obj/image; iframe obj/embed_code">
                <div class="banner-image-wrapper" tal:condition="image">
                  <div class="banner-layer">
                    <div class="banner-layer-caption"
                      tal:content="structure python: obj.lead_image_caption.output"
                      tal:on-error="nothing">
                      Image caption
                    </div>
                  </div>
                  <div class="banner-image"
                    tal:attributes="style string:background-image:url('${banner/getURL}/@@images/image/large')">
                  </div>
                </div>
                <div class="iframe-wrapper" tal:condition="iframe">
                  <div tal:omit-tag="" tal:content="structure iframe"></div>
                </div>
              </div>
            </div>
          </div>
        </tal:rep>
      </div>

      <div class="banner-actions">
        <a id="b-prev" class="slide-prev slide-arrow" href="#"></a>
        <a id="b-next" class="slide-next slide-arrow" href="#"></a>
      </div>
    </div>

  </tal:cond>
</tal:def>
