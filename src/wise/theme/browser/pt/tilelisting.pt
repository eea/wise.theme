<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="plone"
  >
  
  <metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">
      <div class="row">
        <div class="col-xs-12 col-md-4"
             tal:repeat="
              folder python: 
              context.listFolderContents(contentFilter={'portal_type' : 'Folder'})">
          <div tal:define="summary_id python: 'summary_' + folder.title.lower().replace(' ', '_');
                            url python: folder.absolute_url() + '/@@images/image/'">
            <a class="pat-plone-modal title"
                tal:attributes="href python: '#' + summary_id" 
                tal:content="folder/title"></a>
            <div class="tile-listing-wrapper">
              <div tal:condition="folder/image"
                  class="tile-listing-image"
                  tal:attributes="
                    style string:background-image:url('${python: url + '/preview'}')">
              </div>
              <div tal:attributes="id summary_id"
                    style="display: none">
                <a tal:attributes="href folder/absolute_url" tal:content="folder/title">Title(link)</a>
                <p tal:content="folder/Description">Summary</p>
                <img tal:attributes="href python: url + '/large'"/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </metal:content-core>
  </metal:content-core>
</html>
